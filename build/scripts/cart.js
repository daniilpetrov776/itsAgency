var p=t=>t.key==="Escape";var i=t=>{let c=parseInt(t.textContent,10);c+=1,t.textContent=c},_=t=>{let c=parseInt(t.textContent,10);c>0&&(c-=1,t.textContent=c)},C=t=>t%10===1&&t%100!==11?`${t} \u0442\u043E\u0432\u0430\u0440`:t%10>=2&&t%10<=4&&(t%100<12||t%100>14)?`${t} \u0442\u043E\u0432\u0430\u0440\u0430`:`${t} \u0442\u043E\u0432\u0430\u0440\u043E\u0432`;var M=document.querySelector("#card").content.querySelector(".products__products-list-item"),$=document.querySelector("#card-cart").content.querySelector(".cart__cart-list-item"),N=document.querySelector(".products__products-list"),h=document.querySelector(".cart__cart-list");var y=({id:t,name:c,price:n,image:e})=>{let s=document.createDocumentFragment(),a=$.cloneNode(!0),u=a.querySelector(".cart-product__image"),L=a.querySelector(".cart-product__price"),b=a.querySelector(".cart-product__title"),v=a.querySelector("source"),m=a.querySelector(".cart-product__product-counter");v.srcset=`./images/mock-item-cart${e}@1x.webp, ./images/mock-item-cart${e}@2x.webp 2x`,a.dataset.id=t,u.src=`./images/mock-item-cart${e}@1x.png`,u.srcset=`./images/mock-item-cart${e}@2x.png`,L.textContent=`${n} \u20BD`,b.textContent=c,m.textContent=1,m.dataset.counter=t,s.appendChild(a),h.appendChild(s)};var T=document.querySelector(".header-menu__button--cart"),r=document.querySelector(".cart__cart-background"),l=r.querySelector(".cart__cart-list"),x=r.querySelector(".cart__cart-close"),q=r.querySelector(".cart__cart-clear"),w=r.querySelector(".cart__cart-total-price"),A=r.querySelector(".cart__cart-count-number"),I=document.querySelector(".header-menu__button-text"),d=t=>{p(t)&&(t.preventDefault(),E())},o=t=>{let c=r.querySelectorAll(".cart__cart-list-item"),n=0;c.forEach(e=>{if(t==="quantity"){let s=parseInt(e.querySelector(".cart-product__product-counter").textContent,10);n+=s}else if(t==="price"){let s=parseFloat(e.querySelector(".cart-product__price").textContent.replace(" \u20BD",""))||0,a=parseInt(e.querySelector(".cart-product__product-counter").textContent,10)||0;n+=s*a}}),t==="quantity"?(A.textContent=C(n),I.textContent=n):t==="price"&&(w.textContent=`${n} \u20BD`)};o("quantity");var g=()=>{E(),document.removeEventListener("keydown",d)},S=t=>{t.target.classList.contains("cart-product__decrease")&&(_(t.target.nextElementSibling),parseInt(t.target.nextElementSibling.textContent,10)===0&&t.target.closest(".cart__cart-list-item").remove()),t.target.classList.contains("cart-product__increase")&&i(t.target.previousElementSibling),o("price"),o("quantity")},k=t=>{t.target.classList.contains("cart-product__action")&&(t.target.closest(".cart__cart-list-item").remove(),o("price"),o("quantity"))},f=()=>{l.innerHTML="",o("price"),o("quantity")};var B=()=>{document.removeEventListener("keydown",d),x.addEventListener("click",g),q.removeEventListener("click",f),l.removeEventListener("click",S),r.removeEventListener("click",k)},D=()=>{document.addEventListener("keydown",d),x.addEventListener("click",g),q.addEventListener("click",f),l.addEventListener("click",S),r.addEventListener("click",k)};function E(){r.classList.add("cart__cart-background--hidden"),B()}var P=()=>{r.classList.remove("cart__cart-background--hidden"),D(),o("price"),o("quantity")};T.addEventListener("click",P);var F=t=>{let n=[...r.querySelectorAll(".cart__cart-list-item")].find(e=>e.getAttribute("data-id")===t.toString());if(n){let e=n.querySelector(".cart-product__product-counter");i(e)}},j=t=>{[...r.querySelectorAll(".cart__cart-list-item")].find(e=>e.getAttribute("data-id")===t.id.toString())?F(t.id):y(t),o("price"),o("quantity")};export{j as addToCart};
