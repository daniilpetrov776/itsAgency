var p=t=>t.key==="Escape";var i=t=>{let r=parseInt(t.textContent,10);r+=1,t.textContent=r},_=t=>{let r=parseInt(t.textContent,10);r>0&&(r-=1,t.textContent=r)},C=t=>t%10===1&&t%100!==11?`${t} \u0442\u043E\u0432\u0430\u0440`:t%10>=2&&t%10<=4&&(t%100<12||t%100>14)?`${t} \u0442\u043E\u0432\u0430\u0440\u0430`:`${t} \u0442\u043E\u0432\u0430\u0440\u043E\u0432`;var G=document.querySelector("#card").content.querySelector(".products__products-list-item"),T=document.querySelector("#card-cart").content.querySelector(".cart__cart-list-item"),H=document.querySelector(".products__products-list"),h=document.querySelector(".cart__cart-list");var y=({id:t,name:r,price:c,image:e})=>{let s=document.createDocumentFragment(),a=T.cloneNode(!0),u=a.querySelector(".cart-product__image"),b=a.querySelector(".cart-product__price"),v=a.querySelector(".cart-product__title"),$=a.querySelector("source"),m=a.querySelector(".cart-product__product-counter");$.srcset=`./images/mock-item-cart${e}@1x.webp, ./images/mock-item-cart${e}@2x.webp 2x`,a.dataset.id=t,u.src=`./images/mock-item-cart${e}@1x.png`,u.srcset=`./images/mock-item-cart${e}@2x.png`,b.textContent=`${c} \u20BD`,v.textContent=r,m.textContent=1,m.dataset.counter=t,s.appendChild(a),h.appendChild(s)};var w=document.querySelector(".header-menu__button--cart"),o=document.querySelector(".cart__cart-background"),d=o.querySelector(".cart__cart-list"),x=o.querySelector(".cart__cart-close"),q=o.querySelector(".cart__cart-clear"),A=o.querySelector(".cart__cart-total-price"),I=o.querySelector(".cart__cart-count-number"),B=document.querySelector(".header-menu__button-text"),l=t=>{p(t)&&(t.preventDefault(),L())},n=t=>{let r=o.querySelectorAll(".cart__cart-list-item"),c=0;r.forEach(e=>{if(t==="quantity"){let s=parseInt(e.querySelector(".cart-product__product-counter").textContent,10);c+=s}else if(t==="price"){let s=parseFloat(e.querySelector(".cart-product__price").textContent.replace(" \u20BD",""))||0,a=parseInt(e.querySelector(".cart-product__product-counter").textContent,10)||0;c+=s*a}}),t==="quantity"?(I.textContent=C(c),B.textContent=c):t==="price"&&(A.textContent=`${c} \u20BD`)};n("quantity");var g=()=>{L(),document.removeEventListener("keydown",l)},S=t=>{t.target.classList.contains("cart-product__decrease")&&(_(t.target.nextElementSibling),parseInt(t.target.nextElementSibling.textContent,10)===0&&t.target.closest(".cart__cart-list-item").remove()),t.target.classList.contains("cart-product__increase")&&i(t.target.previousElementSibling),n("price"),n("quantity")},k=t=>{t.target.classList.contains("cart-product__action")&&(t.target.closest(".cart__cart-list-item").remove(),n("price"),n("quantity"))},f=()=>{d.innerHTML="",n("price"),n("quantity")},P=()=>{document.removeEventListener("keydown",l),x.addEventListener("click",g),q.removeEventListener("click",f),d.removeEventListener("click",S),o.removeEventListener("click",k)},D=()=>{document.addEventListener("keydown",l),x.addEventListener("click",g),q.addEventListener("click",f),d.addEventListener("click",S),o.addEventListener("click",k)};function L(){o.classList.add("cart__cart-background--hidden"),P()}var F=()=>{o.classList.remove("cart__cart-background--hidden"),D(),n("price"),n("quantity")};w.addEventListener("click",F);var K=t=>{let c=[...o.querySelectorAll(".cart__cart-list-item")].find(e=>e.getAttribute("data-id")===t.toString());if(c){let e=c.querySelector(".cart-product__product-counter");i(e)}},E=t=>{[...o.querySelectorAll(".cart__cart-list-item")].find(e=>e.getAttribute("data-id")===t.id.toString())?K(t.id):y(t),n("price"),n("quantity")};var N=document.querySelector(".products__products-list"),Q=t=>{N.addEventListener("click",r=>{let c=r.target.closest(".card");if(c){let e=t.find(s=>s.id===Number(c.dataset.id));E(e)}})};export{Q as addGalleryListener};
